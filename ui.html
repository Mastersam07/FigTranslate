<!DOCTYPE html>
<html>
  <body>
    <h3>Export Text Nodes to ARB</h3>
    <button id="exportButton">Extract and Download .arb</button>
    <script>
      document.getElementById('exportButton').onclick = () => {
        parent.postMessage({ pluginMessage: { type: 'export-text' } }, '*');
      };

      onmessage = (event) => {
        if (event.data.pluginMessage.type === 'download-arb') {
          const arbData = event.data.pluginMessage.data;
          const blob = new Blob([arbData], { type: "application/json" });
          const url = URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;
          a.download = "translations.arb";
          a.click();
          URL.revokeObjectURL(url);
        }
      };
    </script>
  </body>
</html>
